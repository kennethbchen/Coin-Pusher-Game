[gd_scene load_steps=22 format=3 uid="uid://cw4metkrk77oe"]

[ext_resource type="PackedScene" uid="uid://dco6gh876g323" path="res://Scenes/Token.tscn" id="1_flwpa"]
[ext_resource type="Script" path="res://Scripts/Game.gd" id="1_ppn4k"]
[ext_resource type="Environment" uid="uid://xf43172ybnbv" path="res://Environment.tres" id="3_e7xe6"]
[ext_resource type="Script" path="res://Scripts/BoxArea.gd" id="3_ly35t"]
[ext_resource type="Script" path="res://Scripts/Pusher.gd" id="3_usv3y"]
[ext_resource type="Material" uid="uid://hu2ca8426jj6" path="res://Materials/TestMat2.tres" id="4_blkp5"]
[ext_resource type="Material" uid="uid://knf57an1tcox" path="res://Materials/TestMat3.tres" id="6_iueic"]
[ext_resource type="PackedScene" uid="uid://c40s12674ymbj" path="res://Models/CoinPusher/CoinPusher.gltf" id="7_bk6p4"]

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_nub80"]
auto_exposure_scale = 0.08
auto_exposure_speed = 4.34
dof_blur_far_distance = 244.52
dof_blur_amount = 0.02

[sub_resource type="BoxShape3D" id="BoxShape3D_ss8l5"]
size = Vector3(10.6535, 0.0553397, 4.59185)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_mbf4w"]

[sub_resource type="BoxMesh" id="BoxMesh_7ucsw"]
size = Vector3(9.2, 1, 5)

[sub_resource type="BoxShape3D" id="BoxShape3D_lwvvu"]
size = Vector3(9.2, 1, 5)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_v5i0y"]

[sub_resource type="BoxShape3D" id="BoxShape3D_gwtrq"]
size = Vector3(15, 5.90867, 10)

[sub_resource type="BoxShape3D" id="BoxShape3D_lss3s"]
size = Vector3(1.09942, 10.7226, 5.57271)

[sub_resource type="BoxShape3D" id="BoxShape3D_skav7"]
size = Vector3(1.09942, 13.8097, 5.25509)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_egkv5"]
plane = Plane(0, 0, -1, 0)

[sub_resource type="BoxMesh" id="BoxMesh_eduah"]
size = Vector3(9.275, 4.22, 1)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_uxs7o"]
plane = Plane(0, -1, 0, 0)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_5vig4"]

[node name="Game" type="Node3D"]
script = ExtResource("1_ppn4k")
token_scene = ExtResource("1_flwpa")

[node name="Env" type="Node" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Env"]
environment = ExtResource("3_e7xe6")
camera_attributes = SubResource("CameraAttributesPractical_nub80")

[node name="Camera3D" type="Camera3D" parent="Env"]
transform = Transform3D(-1, 2.96134e-08, -8.22543e-08, -4.92284e-08, 0.586782, 0.809745, 7.22447e-08, 0.809745, -0.586782, -9.53674e-07, 5.43284, -22.9952)
fov = 80.0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Env"]
transform = Transform3D(0.614276, 0.714692, 0.334484, -0.0960912, -0.35298, 0.930684, 0.783218, -0.603838, -0.148151, -0.00509369, 8.25412, 0.0035336)
shadow_enabled = true
shadow_opacity = 0.83
directional_shadow_mode = 1
directional_shadow_split_1 = 0.115

[node name="SpawnArea" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.799474, -19.8204)
shape = SubResource("BoxShape3D_ss8l5")
disabled = true
script = ExtResource("3_ly35t")

[node name="Table" type="Node3D" parent="."]

[node name="CoinPusher" parent="Table" instance=ExtResource("7_bk6p4")]

[node name="Machine" parent="Table/CoinPusher" index="0"]
material_override = ExtResource("6_iueic")

[node name="Pusher" type="AnimatableBody3D" parent="Table"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.156359, -15.5633)
physics_material_override = SubResource("PhysicsMaterial_mbf4w")
script = ExtResource("3_usv3y")
enabled = false
push_direction = Vector3(0, 0, 1)
push_distance = 2.0
push_frequency = 2.0
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="Table/Pusher"]
material_override = ExtResource("4_blkp5")
mesh = SubResource("BoxMesh_7ucsw")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Table/Pusher"]
shape = SubResource("BoxShape3D_lwvvu")

[node name="Colliders" type="Node3D" parent="Table"]

[node name="Floor" type="StaticBody3D" parent="Table/Colliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.125178, -17.5908)
physics_material_override = SubResource("PhysicsMaterial_v5i0y")
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Table/Colliders/Floor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.82515, 0)
shape = SubResource("BoxShape3D_gwtrq")

[node name="Left" type="StaticBody3D" parent="Table/Colliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.82606, 2.28074, -21.6214)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Table/Colliders/Left"]
transform = Transform3D(0.965926, 0, -0.258819, 0, 1, 0, 0.258819, 0, 0.965926, -1.00626, 1.61852, 0.805893)
shape = SubResource("BoxShape3D_lss3s")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="Table/Colliders/Left"]
transform = Transform3D(1, 0, 0, 0, 0.999999, 0, 0, 0, 0.999999, -1.72429, 0, 5.99775)
shape = SubResource("BoxShape3D_skav7")

[node name="Right" type="StaticBody3D" parent="Table/Colliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.826, 2.281, -21.621)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Table/Colliders/Right"]
transform = Transform3D(0.965926, 0, 0.258819, 0, 1, 0, -0.258819, 0, 0.965926, 1.006, 1.619, 0.806)
shape = SubResource("BoxShape3D_lss3s")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="Table/Colliders/Right"]
transform = Transform3D(1, 0, 0, 0, 0.999999, 0, 0, 0, 0.999999, 1.724, 0, 5.998)
shape = SubResource("BoxShape3D_skav7")

[node name="Back" type="StaticBody3D" parent="Table/Colliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.69056, -15.4952)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Table/Colliders/Back"]
shape = SubResource("WorldBoundaryShape3D_egkv5")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Table/Colliders/Back"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.465317)
material_override = ExtResource("6_iueic")
mesh = SubResource("BoxMesh_eduah")

[node name="Roof" type="StaticBody3D" parent="Table/Colliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.415768, 9.09039, -16.0151)
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Table/Colliders/Roof"]
shape = SubResource("WorldBoundaryShape3D_uxs7o")

[node name="BottomHitbox" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -4.29, -13.9999)

[node name="CollisionShape3D" type="CollisionShape3D" parent="BottomHitbox"]
shape = SubResource("WorldBoundaryShape3D_5vig4")

[node name="Tokens" type="Node" parent="."]

[node name="Token" parent="." instance=ExtResource("1_flwpa")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.64923, 1.127, -20.3721)

[connection signal="body_entered" from="BottomHitbox" to="." method="_on_body_fell"]

[editable path="Table/CoinPusher"]
